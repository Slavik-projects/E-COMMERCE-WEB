<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://api.fontshare.com/v2/css?f[]=satoshi@400&display=swap" rel="stylesheet">
	<link href="https://api.fontshare.com/v2/css?f[]=clash-display@400,500&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="css/style.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<title>Chairs</title>
</head>

<body>
	<div class="wrapper">
		<header class="header header_fixed">
   <div class="header__container">
		<div class="header__row">
			<div class="header__row_avion">
            <div class="header__row-search">
					<img src="img/Search.png" alt="">
				</div>
				<div class="header__row-buy">
					<div class="header__row-basket">
						<img src="img/Shopping--cart.png" alt="">
					</div>
					<div class="header__row-user">
						<img src="img/User--avatar.png" alt="">
					</div>
				</div>
				<div class="header__row-name">
					<p>Avion</p>
				</div>
			</div>
		</div>
		<div class="header__row header__row_border">
			<div class="header__row_menu">
				<nav class="header__row_nav">
               <ul class="header__row_ul">
					   <li>Plant pots</li>
						<li>Ceramics</li>
						<li>Tables</li>
						<li>Chairs</li>
						<li>Crockery</li>
						<li>Tableware</li>
						<li>Cutlery</li>
				   </ul>
				</nav>
				<div class="header__burger">
					<span></span>
					<span></span>
				</div>
			</div>
		</div>
</div>
</header>
		<main class="page">
			<div class="label">
				<div class="label__name">
               <p>Your shopping cart</p>
			   </div>
				<div class="label__parameters">
					<p>Product</p>
					<p>Quantity</p>
					<p>Total</p>
				</div>
			</div>
			<div class="cards">

			</div>
			<div class="subtotal">
            <div class="subtotal__price">
					<p>Subtotal</p>
					<p class="subtotal__amount"></p>
				</div>
				<div class="subtotal__desc">
					<p>Taxes and shipping are calculated at checkout</p>
				</div>
				<div class="subtotal__checkout">
					<button>Go to checkout</button>
				</div>
			</div>
		</main>
		<footer name="bottom" class="footer">
	<div class="footer__container">
		<div class="footer__body">
			<div class="footer__menu">
				<div class="footer__columns">
						<ul>
							<li><a href="index.html">Menu</a></li>
							<li><a href="">New arrivals</a></li>
							<li><a href="">Best sellers</a></li>
							<li><a href="">Recently viewed</a></li>
							<li><a href="">Popular this week</a></li>
							<li><a href="products.html">All products</a></li>
						</ul>
						<ul>
							<li><a href="">Categories</a></li>
							<li><a href="">Crockery</a></li>
							<li><a href="">Furniture</a></li>
							<li><a href="">Homeware</a></li>
							<li><a href="">Plant pots</a></li>
							<li><a href="chairs.html">Chairs</a></li>
							<li><a href="">Crockery</a></li>
						</ul>
						<ul>
							<li><a href="">Our company</a></li>
							<li><a href="aboutus.html">About us</a></li>
							<li><a href="">Vacancies</a></li>
							<li><a href="">Contact us</a></li>
							<li><a href="">Privacy</a></li>
							<li><a href="">Returns policy</a></li>
						</ul>
				</div>
			</div>
			<div class="footer__form">
            <p>Join our mailing list</p>
				<div class="items">
					<input type="text" placeholder="your@email.com">
				   <button>Sign up</button>
				</div>
			</div>
		</div>
		<div class="footer__copy">
			<div class="copy__body">
				<div class="copy__text">
					<p>Copyright 2022 Avion LTD</p>
				</div>
				<div class="copy__sociual">
					<ul>
						<li><a class="_icon-linkedin"></a></li>
						<li><a class="_icon-facebook"></a></li>
						<li><a class="_icon-insta"></a></li>
						<li><a class="_icon-skype"></a></li>
						<li><a class="_icon-twitter"></a></li>
						<li><a class="_icon-pinterest"></a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</footer>
	</div>
	<script>
		let shopItemsDataTwo = [
	{
		id: "1",
		name: "The Dandy Chair",
		price: 250,
		img: "img/card.jpg"
	},
	{
		id: "2",
		name: "The Dandy chair",
		price: "250",
		img: "img/shop/01.png"
	},
	{
		id: "3",
		name: "Rustic Vase Set",
		price: "155",
		img: "img/shop/02.png"
	},
	{
		id: "4",
		name: "The Silky Vase",
		price: "125",
		img: "img/shop/03.png"
	},
	{
		id: "5",
		name: "The Lucy Lamp",
		price: "399",
		img: "img/shop/04.png"
	},
	{
		id: "6",
		name: "The Dandy chair",
		price: "250",
		img: "img/shop/01.png"
	},
	{
		id: "7",
		name: "Rustic Vase Set",
		price: "155",
		img: "img/shop/02.png"
	},
	{
		id: "8",
		name: "The Silky Vase",
		price: "125",
		img: "img/shop/03.png"
	},
	{
		id: "9",
		name: "The Lucy Lamp",
		price: "399",
		img: "img/shop/04.png"
	}
]
		
      let basket = JSON.parse(localStorage.getItem("data")) || [];
		let shoppingCards = document.querySelector('.cards');
		let label = document.querySelector('.label');
		const subtotalAmount = document.querySelector('.subtotal__amount');
         
         

		   let generateCartItems = () => {
				if(basket.length !== 0){
					return (shoppingCards.innerHTML = basket.map((x) => {
						let {id, item} = x;
						let search = shopItemsDataTwo.find((y) => y.id === id) || [];
                  return `
						<div class="cards__item">
						   <div class="cards__col">
							   <div class="cards__image">
							      <img width="100" src=${search.img}  alt="" />
						      </div>  
								<div class="cards__text">
							      <h1>${search.name}</h1>
									<p>A timeless ceramic vase with 
                           a tri color grey glaze.</p>
                           <p>$${search.price}</p>
						      </div>  
						   </div>
							<div class="cards__col">
								<div class="cards__actions">
								<i class="bi bi-dash-lg"></i>
									<div id=${id} class="quantity">${item}</div>
									<i class="bi bi-plus-lg"></i>
								</div>
							</div>
							<div class="cards__col">
                           <p id=${id} class="total">$ ${item * search.price}</p>
							</div>
						</div>
						`;
					}).join(""));
				}else{
					shoppingCards.innerHTML = ``
					label.innerHTML = `
					<div class="empty">	
						<div class="empty__wrap">
					   <h1>Cart is Empty</h1>
						<a href="chairs.html">
							<button class="HomeBtn">Back to home</button>
						</a>
					   </div>
					</div>
					`
				}
			};
			generateCartItems();

			let increment = (e) => {
	      let id = e.target.previousElementSibling;
	      let selectedItem = id;
			////FOR TOTAL PRICE
			let b = e.target.parentElement.parentElement.nextElementSibling.firstElementChild;
			let selectedTotal = b;
	      let search = basket.find((x) => x.id === selectedItem.id )
	      if(search === undefined){
         basket.push({
			id: selectedItem.id,
			item: 1,
		   });
	      }
	      else{
         search.item += 1;
	      }
	      update(selectedItem.id, selectedTotal.id);
			localStorage.setItem("data", JSON.stringify(basket));
      }

         let decrement = (e) => {
	      let id = e.target.nextElementSibling;
	      let selectedItem = id;
	      let search = basket.find((x) => x.id === selectedItem.id );
			////FOR TOTAL PRICE
			let b = e.target.parentElement.parentElement.nextElementSibling.firstElementChild;
			let selectedTotal = b;
	      if(search === undefined) return;
	      else if (search.item === 0) return;
	      else{
         search.item -= 1;
	      }
	      update(selectedItem.id, selectedTotal.id);
	      basket = basket.filter((x) => x.item !== 0);
	      //generateCartItems();/*TO COMMENT*/
			if(search.item === 0){
				let erasableElement = selectedItem.parentElement.parentElement.parentElement;
				erasableElement.style.display="none";
				TotalAmout();
				if(basket.length == 0){
               generateCartItems();
				}
			}
	      localStorage.setItem("data", JSON.stringify(basket));
         }
	      ///+
         let pluses = document.querySelectorAll('.bi-plus-lg');
         pluses.forEach((plus) => {
	      plus.addEventListener('click', increment)
         })

         ///-
         let minuses = document.querySelectorAll('.bi-dash-lg');
         minuses.forEach((minus) => {
	      minus.addEventListener('click', decrement)
         })
         let update = (id, b) => {
	      let search = basket.find((x) => x.id === id);
	      document.getElementById(id).innerHTML = search.item;
         ///FOR TOTAL PRICE
			let searchTotal = shopItemsDataTwo.find((t) => t.id === b);
			document.getElementById(b).parentElement.parentElement.nextElementSibling.firstElementChild.innerHTML = `$ ${search.item * searchTotal.price}`;
			TotalAmout();
         };

			let TotalAmout = () => {
				if(basket.length !== 0){
               let amount = basket.map((x) => {
						let { id, item} = x;
						let search = shopItemsDataTwo.find((y) => y.id === id) || [];
						return item * search.price
					}).reduce((x,y) => x + y, 0);
					subtotalAmount.innerHTML = `$ ${amount}`;
				} else return
			}

			TotalAmout();

			///BURDER
			const menu = document.querySelector('.header__row_nav');
      const burger = document.querySelector('.header__burger');
      const body = document.querySelector('body');
		const headerRowUl = document.querySelector('.header__row_ul');
      burger.addEventListener("click", function(){
	   menu.classList.toggle('active');
      burger.classList.toggle('active');
		headerRowUl.classList.toggle('active');
	   body.classList.toggle('lock');
      })
	</script>
</body>

</html>